<div main-content>
  <ul class="nav nav-pills">
    <li ng-class="{active:it._id == league._id}" ng-repeat="it in leagues">
      <a href="" ng-click="loadLeague(it)">{{it._id}}</a>
    </li>
  </ul>
  <hr/> 
  <div class="" ng-if="!league">
    <alert type="'danger'">Aun no ha creado ninguna liga</alert>
  </div>
  <div class="row" ng-if="league"> 
    <div class="col-lg-2">
      <ul class="nav nav-pills nav-stacked">
        <li ng-class="{active:it._id == match._id}" ng-repeat="it in matches | orderBy:'round'">
          <a href="" ng-click="loadMatch(it)">Fecha #{{it.round}}</a>
        </li>
      </ul>
    </div>
    <div class="col-lg-10" >
      <h4>{{league.name}}
      <a href="#/league/edit/{{league._id}}" secure>
        <span style="color: white;" class="glyphicon glyphicon-edit pull-right"></span>
      </a>
      </h4>
      <b>Desde: </b>{{league.startDate|date:'dd-MM-yyyy'}} 
      <span ng-hide="$last" class="glyphicon glyphicon-flash"></span>
      <b>Hasta: </b>{{league.finishDate|date:'dd-MM-yyyy'}}
      <span ng-hide="$last" class="glyphicon glyphicon-flash"></span>
      <b>Estado: </b>{{league.status|afdLeagueStatus}}
      <hr/>
      <!-- Match detail -->
      <div ng-if="match" match-detail="match"></div>
      <div ng-if="match">
        <div class="panel panel-default" > 
          <div class="panel-heading">Tablas a la fecha #{{match.round}}</div>
          <div class="panel-body">
            <div class="col-md-6">
              <table class="table table-condensed table-bordered">
                <thead>
                  <tr>
                    <th>Jugador</th>
                    <th>Pts</th>
                    <th>J</th>
                    <th>G</th>
                    <th>E</th>
                    <th>P</th>
                    <th>G.F</th>
                    <th>B</th>
                    <th>P1</th>
                    <th>P2</th>
                    <th>P3</th>
                  </tr>
                </thead>
                <tbody>
                  <tr ng-repeat="player in stats.byPlayer | orderBy:'-points'">
                    <td>{{playersMap[player.player].alias}}</td>
                    <td>{{player.points}}</td>
                    <td>{{player.count}}</td>
                    <td>{{player.win}}</td>
                    <td>{{player.even}}</td>
                    <td>{{player.lost}}</td>
                    <td>{{player.goals}}</td>
                    <td>{{player.beers}}</td>
                    <td>{{player.podium1}}</td>
                    <td>{{player.podium2}}</td>
                    <td>{{player.podium3}}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
      <div ng-if="!match" >
        <alert type="'warning'">Esta liga no tiene ningun partido creado</alert>
      </div>

      <hr/>
      <a class="btn btn-primary btn-sm" href="#/match/new?league_id={{league._id}}&nextRound={{nextRound}}&nextDate={{nextDate}}" secure>
        <span class="glyphicon glyphicon-plus"></span> Programar un partido
      </a>
    </div>    
  </div>
  <hr/>
  <a class="btn btn-success btn-sm" href="#/league/new" secure>
    <span class="glyphicon glyphicon-plus"></span> Crear una Liga
  </a>
</div>

<div side-bar>
  <div ng-include="'side/side.html'"></div>
</div>
